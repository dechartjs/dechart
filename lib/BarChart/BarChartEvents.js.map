{"version":3,"sources":["BarChart/BarChartEvents.js"],"names":["BarChart","prototype","attachEventHandlers","that","svgRootInnerNode","$svgRootInner","node","$svgRoot","on","emit","syntheticEvent","makeSyntheticEvent","undefined","d3","mouse","clientX","clientY","SyntheticEvent","bulbX","bulbY","getBulbY","yScale","selectedData","key","push","createSelectedData","data","keys","obj","forEach","date"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;AAEe,kBAAUA,QAAV,EAAoB;AACjCA,EAAAA,QAAQ,CAACC,SAAT,CAAmBC,mBAAnB,GAAyC,YAAY;AACnD,QAAMC,IAAI,GAAG,IAAb;AACA,QAAMC,gBAAgB,GAAGD,IAAI,CAACE,aAAL,IAAsBF,IAAI,CAACE,aAAL,CAAmBC,IAAnB,EAA/C;AAEAH,IAAAA,IAAI,CAACI,QAAL,CACGC,EADH,CACM,WADN,EACmB,YAAM;AACrBL,MAAAA,IAAI,CAACM,IAAL,CAAU,WAAV,EAAuB,EAAvB;AACD,KAHH,EAKGD,EALH,CAKM,UALN,EAKkB,YAAM;AACpBL,MAAAA,IAAI,CAACM,IAAL,CAAU,UAAV,EAAsB,EAAtB;AACD,KAPH,EASGD,EATH,CASM,WATN,EASmB,YAAM;AACrB,UAAME,cAAc,GAAGC,kBAAkB,CAACR,IAAD,EAAOC,gBAAP,CAAzC;AACAD,MAAAA,IAAI,CAACM,IAAL,CAAU,WAAV,EAAuBC,cAAvB;AACD,KAZH;AAaD,GAjBD;;AAmBA,SAAOV,QAAP;AACD;;AAED,SAASW,kBAAT,CAA4BR,IAA5B,EAAkCC,gBAAlC,EAAoD;AAClD,MAAIA,gBAAgB,KAAKQ,SAAzB,EAAoC,OAAO,IAAP;;AADc,kBAGrBC,EAAE,CAACC,KAAH,CAASV,gBAAT,CAHqB;AAAA;AAAA,MAG1CW,OAH0C;AAAA,MAGjCC,OAHiC,kBAIlD;AACA;;;AAEA,SAAO,IAAIC,uBAAJ,CAAmB;AACxBC,IAAAA,KAAK,EAAEH,OADiB;AAExBI,IAAAA,KAAK,EAAEH,OAFiB;AAGxBD,IAAAA,OAAO,EAAPA,OAHwB;AAIxBC,IAAAA,OAAO,EAAPA,OAJwB,CAKxB;AACA;;AANwB,GAAnB,CAAP;AAQD;;AAED,SAASI,QAAT,CAAkBC,MAAlB,EAA0BC,YAA1B,EAAwC;AACtC,MAAMH,KAAK,GAAG,EAAd;;AACA,OAAK,IAAMI,GAAX,IAAkBD,YAAlB,EAAgC;AAC9BC,IAAAA,GAAG,KAAK,MAAR,IAAkBJ,KAAK,CAACK,IAAN,CAAWH,MAAM,CAAC,CAACC,YAAY,CAACC,GAAD,CAAd,CAAjB,CAAlB;AACD;;AAED,SAAOJ,KAAP;AACD;;AAED,SAASM,kBAAT,CAA4BC,IAA5B,EAAkCC,IAAlC,EAAwC;AACtC,MAAMC,GAAG,GAAG,EAAZ;AACAD,EAAAA,IAAI,CAACE,OAAL,CAAa,UAACN,GAAD,EAAS;AACpBK,IAAAA,GAAG,CAACL,GAAD,CAAH,GAAWG,IAAI,CAACH,GAAD,CAAf;AACD,GAFD;AAGAK,EAAAA,GAAG,CAACE,IAAJ,GAAWJ,IAAI,CAACI,IAAhB;AACA,SAAOF,GAAP;AACD","sourcesContent":["import * as d3 from 'd3';\nimport { makeBisector } from '../utils';\nimport SyntheticEvent from '../SyntheticEvent';\n\nexport default function (BarChart) {\n  BarChart.prototype.attachEventHandlers = function () {\n    const that = this;\n    const svgRootInnerNode = that.$svgRootInner && that.$svgRootInner.node();\n\n    that.$svgRoot\n      .on('mouseover', () => {\n        that.emit('mouseover', {});\n      })\n\n      .on('mouseout', () => {\n        that.emit('mouseout', {});\n      })\n\n      .on('mousemove', () => {\n        const syntheticEvent = makeSyntheticEvent(that, svgRootInnerNode);\n        that.emit('mousemove', syntheticEvent);\n      });\n  };\n\n  return BarChart;\n}\n\nfunction makeSyntheticEvent(that, svgRootInnerNode) {\n  if (svgRootInnerNode === undefined) return null;\n\n  const [ clientX, clientY ] = d3.mouse(svgRootInnerNode);\n  // console.log(5555, that.xScale.range());\n  // console.log(6666, that.xScale.bandwidth());\n\n  return new SyntheticEvent({\n    bulbX: clientX,\n    bulbY: clientY,\n    clientX,\n    clientY,\n    // selectedData,\n    // xIdx,\n  });\n}\n\nfunction getBulbY(yScale, selectedData) {\n  const bulbY = [];\n  for (const key in selectedData) {\n    key !== 'date' && bulbY.push(yScale(+selectedData[key]));\n  }\n\n  return bulbY;\n}\n\nfunction createSelectedData(data, keys) {\n  const obj = {};\n  keys.forEach((key) => {\n    obj[key] = data[key];\n  });\n  obj.date = data.date;\n  return obj;\n}\n"],"file":"BarChartEvents.js"}